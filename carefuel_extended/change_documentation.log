# Open ports for webserver
sudo iptables -A INPUT -p tcp --dport http -j ACCEPT
sudo iptables -A INPUT -p tcp --dport https -j ACCEPT

# Install Java
sudo apt-get install default-jre
sudo apt-get install default-jdk
-> that was java7...
-> update /etc/apt/sources.list to import jessie-backports
sudo apt install -t jessie-backports  openjdk-8-jre-headless ca-certificates-java
sudo apt-get install openjdk-8-jre
sudo apt-get install openjdk-8-jdk
sudo update-alternatives --config java (change default version to java 8)
also updated locale settings with (sudo dpkg-reconfigure locales)

# Webserver
Created new folder 'carefuel' in root directory
start webserver with: sudo java -jar -Dserver.port=80 carefuel_server-0.1.0.jar
-> sudo due to port 80, in linux all ports under 1024 are normally reserved

# Database
Create the file /etc/apt/sources.list.d/pgdg.list, and add a line for the repository
	deb http://apt.postgresql.org/pub/repos/apt/ jessie-pgdg main
sudo wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | \ sudo apt-key add -
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib

#join database
sudo -u postgres psql postgres

#create database with standard UTF-8
CREATE DATABASE "carefuel"
  WITH OWNER "postgres"
  ENCODING 'UTF8'
  LC_COLLATE = 'en_US.UTF-8'
  LC_CTYPE = 'en_US.UTF-8';

#switch to user postgres
sudo su - postgres  

#restore data
psql carefuel < history.dump
psql carefuel < history.dump.1

#create index to perform queries
CREATE INDEX index_on_stid
	ON gas_station_information_history (stid);
	
#create new database table for our predictions
-- Table: public.gas_station_information_prediction

CREATE TABLE public.gas_station_information_prediction
(
    id integer NOT NULL,
    stid uuid NOT NULL,
    e5 smallint,
    e10 smallint,
    diesel smallint,
    date timestamp(0) with time zone,
    CONSTRAINT gas_station_information_prediction_pkey PRIMARY KEY (id),
    CONSTRAINT gas_station_has_gas_station_information_predictions FOREIGN KEY (stid)
        REFERENCES public.gas_station (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)
WITH (
    OIDS = FALSE
)
TABLESPACE pg_default;

ALTER TABLE public.gas_station_information_prediction
    OWNER to postgres;

-- Index: index_on_date_prediction

-- DROP INDEX public.index_on_date_prediction;

CREATE INDEX index_on_date_prediction
    ON public.gas_station_information_prediction USING btree
    (date)
    TABLESPACE pg_default;

-- Index: index_on_date_stid

-- DROP INDEX public.index_on_date_stid;

CREATE INDEX index_on_date_stid
    ON public.gas_station_information_prediction USING btree
    (stid)
    TABLESPACE pg_default;


# Google Maps API

Erstellung eines Google Account carefuel.luh

Mail:	carefuel.luh@gmail.com
Password: NJuJh1A!Wln..
API-Key: AIzaSyAvS9-jUE8zO6234VVC5_O2GvkDLtN27K0